#


## VectorClockItem
[source](https://github.com/estudio89/estudio89/maestro-python/blob/master/maestro/core/metadata.py/#L9)
```python 
VectorClockItem(
   provider_id: 'str', timestamp: 'dt.datetime'
)
```


---
Stores the timestamp from a specific provider.


**Attributes**

* **provider_id** (str) : The identifier of the node that owns this clock.
* **timestamp** (datetime) : The timestamp.



**Methods:**


### .is_empty
[source](https://github.com/estudio89/estudio89/maestro-python/blob/master/maestro/core/metadata.py/#L56)
```python
.is_empty()
```


----


## VectorClock
[source](https://github.com/estudio89/estudio89/maestro-python/blob/master/maestro/core/metadata.py/#L60)
```python 
VectorClock(
   *vector_clock_items: 'VectorClockItem'
)
```


---
Groups multiple VectorClockItems from different providers. This class represents the
state of synchronization of a given provider at a specific instant.


**Methods:**


### .get_vector_clock_item
[source](https://github.com/estudio89/estudio89/maestro-python/blob/master/maestro/core/metadata.py/#L130)
```python
.get_vector_clock_item(
   provider_id: 'str'
)
```

---
Returns a VectorClockItem matching the given provider identifier. If none is found,
a new one is created with timestamp equal to dt.datetime.min.


**Args**

* **provider_id** (str) : Provider identifier.


**Returns**

* **VectorClockItem**  : The matching item.


### .update
[source](https://github.com/estudio89/estudio89/maestro-python/blob/master/maestro/core/metadata.py/#L152)
```python
.update(
   vector_clock_item: 'VectorClockItem'
)
```

---
Updates the corresponding VectorClockItem with the new timestamp only if the new
timestamp is greater than the current one.


**Args**

* **vector_clock_item** (VectorClockItem) : The VectorClockItem that should be updated.


----


## Operation
[source](https://github.com/estudio89/estudio89/maestro-python/blob/master/maestro/core/metadata.py/#L167)
```python 
Operation()
```


---
Represents an operation that can be performed on an item.

----


## SerializationResult
[source](https://github.com/estudio89/estudio89/maestro-python/blob/master/maestro/core/metadata.py/#L177)
```python 
SerializationResult()
```


---
Stores the result of serializing an item


**Attributes**

* **item_id** (str) : The primary key of the item.
* **entity_name** (str) : The type of entity represented by this item.
* **serialized_item** (str) : The serialized item.


----


## ItemChange
[source](https://github.com/estudio89/estudio89/maestro-python/blob/master/maestro/core/metadata.py/#L191)
```python 
ItemChange(
   id: 'uuid.UUID', date_created: 'dt.datetime', operation: 'Operation',
   change_vector_clock_item: 'VectorClockItem', insert_vector_clock_item: 'VectorClockItem',
   serialization_result: 'SerializationResult', should_ignore: 'bool', is_applied: 'bool',
   vector_clock: 'VectorClock'
)
```


---
Represents a change performed to an item.


**Attributes**

* **id** (uuid.UUID) : The change's primary key
* **date_created** (dt.datetime) : The date that the change was saved to the data store.
* **is_applied** (bool) : Indicates whether this change has already been applied to the item.
* **operation** (Operation) : The operation that was performed with this change.
* **change_vector_clock_item** (VectorClockItem) : The VectorClockItem generated by the provider that created the change.
* **insert_vector_clock_item** (VectorClockItem) : The VectorClockItem generated by the provider that first inserted the item referenced by this change.
* **serialization_result** (SerializationResult) : The serialization information for the item referenced by this change.
* **should_ignore** (bool) : Indicates whether this change should be ignored (will only be true if this change lost a conflict dispute).
* **vector_clock** (VectorClock) : The synchronization clock at the time this change was created.



**Methods:**


### .reset_status
[source](https://github.com/estudio89/estudio89/maestro-python/blob/master/maestro/core/metadata.py/#L253)
```python
.reset_status()
```

---
Resets all the fields that only make sense locally to a provider that applied the change.
This method is called before the change is sent to a remote provider.

----


## ItemChangeBatch
[source](https://github.com/estudio89/estudio89/maestro-python/blob/master/maestro/core/metadata.py/#L299)
```python 
ItemChangeBatch(
   item_changes: 'List[ItemChange]', is_last_batch: 'bool'
)
```


---
Represents a page of changes. This class' goal is to group the changes being synced into smaller groups
so that a synchronization session containing many changes is not performed all at once but in chunks.


**Attributes**

* **item_changes** (List[ItemChange]) : List of changes contained in the batch.
* **is_last_batch** (bool) : Indicates whether this is the last batch of items to be processed.



**Methods:**


### .get_vector_clock_after_done
[source](https://github.com/estudio89/estudio89/maestro-python/blob/master/maestro/core/metadata.py/#L323)
```python
.get_vector_clock_after_done(
   initial_vector_clock: 'VectorClock'
)
```

---
Retrieves the new VectorClock that the provider will have after applying all the changes contained in the batch.


**Args**

* **initial_vector_clock** (VectorClock) : The VectorClock before the changes are applied.


### .reset_status
[source](https://github.com/estudio89/estudio89/maestro-python/blob/master/maestro/core/metadata.py/#L339)
```python
.reset_status()
```

---
Resets all the local information contained in the changes in this batch before it is sent to a remote provider.

----


## ItemVersion
[source](https://github.com/estudio89/estudio89/maestro-python/blob/master/maestro/core/metadata.py/#L353)
```python 
ItemVersion(
   current_item_change: 'Optional[ItemChange]', item_id: 'str', date_created: 'dt.datetime',
   vector_clock: 'Optional[VectorClock]' = None
)
```


---
Represents the current version of an item: it links an item in the data store to the last change that was applied to it.


**Attributes**

* **current_item_change** (Optional[ItemChange]) : The last change that was applied to the item. It will only be null if the item does not exist in the data store yet.
* **item_id** (str) : The primary key of the item being referenced by this version.
* **date_created** (dt.datetime) : The date this item was first added to this data store.
* **vector_clock** (VectorClock) : The VectorClock of the last change applied to this item (equals the "vector_clock" attribute of "current_item_change").


----


## ConflictStatus
[source](https://github.com/estudio89/estudio89/maestro-python/blob/master/maestro/core/metadata.py/#L409)
```python 
ConflictStatus()
```


---
Represents the status of a conflict.

----


## ConflictType
[source](https://github.com/estudio89/estudio89/maestro-python/blob/master/maestro/core/metadata.py/#L416)
```python 
ConflictType()
```


---
Represents the type of conflict that was detected.

----


## ConflictLog
[source](https://github.com/estudio89/estudio89/maestro-python/blob/master/maestro/core/metadata.py/#L428)
```python 
ConflictLog(
   id: 'uuid.UUID', created_at: 'dt.datetime', resolved_at: 'Optional[dt.datetime]',
   item_change_loser: 'ItemChange', item_change_winner: 'Optional[ItemChange]', status: 'ConflictStatus',
   conflict_type: 'ConflictType', description: 'Optional[str]', query_ids: 'List[str]' = []
)
```


---
Represents the occurrence of a conflict during a synchronization session.


**Attributes**

* **id** (uuid.UUID) : This instance's primary key.
* **created_at** (dt.datetime) : The date that this conflict was detected.
* **resolved_at** (Optional[dt.datetime]) : The date when the conflict was resolved or None if the conflict's status is ConflictStatus.DEFERRED.
* **item_change_loser** (ItemChange) : The change that lost the conflict or, in the case of a conflict of type ConflictType.EXCEPTION_OCCURRED, the change that caused the exception to be raised.
* **item_change_winner** (Optional[ItemChange]) : The change that won the conflict or None, in the case of a conflict of type ConflictType.EXCEPTION_OCCURRED.
* **status** (ConflictStatus) : The status of the conflict.
* **conflict_type** (ConflictType) : The type of conflict.
* **description** (Optional[str]) : This field will contain the stack trace in cause the type of conflict is ConflictType.EXCEPTION_OCURRED, otherwise it will be null.
* **query_ids** (List[str], optional) : A list with identifiers of queries that tried to sync this change


----


## SyncSessionStatus
[source](https://github.com/estudio89/estudio89/maestro-python/blob/master/maestro/core/metadata.py/#L510)
```python 
SyncSessionStatus()
```



----


## SyncSession
[source](https://github.com/estudio89/estudio89/maestro-python/blob/master/maestro/core/metadata.py/#L516)
```python 
SyncSession(
   id: 'uuid.UUID', started_at: 'dt.datetime', ended_at: 'Optional[dt.datetime]',
   status: 'SyncSessionStatus', source_provider_id: 'str', target_provider_id: 'str',
   item_changes: 'List[ItemChange]', query_id: 'Optional[str]' = None
)
```


---
Represents a synchronization session. A session consists of the following stages:
- Processing deferred changes
- Retrieving data from the source provider
- Sending data to the target provider.


**Attributes**

* **id** (uuid.UUID) : This instance's primary key.
* **started_at** (str) : The date when this session started.
* **ended_at** (Optional[dt.datetime]) : The date when this session ended. It will only be None right after the session is created.
* **status** (SyncSessionStatus) : The status of this session.
* **source_provider_id** (str) : The source provider's identifier.
* **target_provider_id** (str) : The target provider's identifier.
* **item_changes** (List[ItemChange]) : The list of changes that were exchanged in this session (either sent or received).
* **query_id** (Optional[str]) : The ID of the query that synced in this session.

